---
phase: 03-form-entegrasyonu-&-n8n-webhook
plan: 1
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/forms/ContactModal.tsx
  - src/components/forms/ContactForm.tsx
  - src/components/ui/input.tsx
  - src/components/ui/textarea.tsx
  - src/components/ui/label.tsx
autonomous: true

must_haves:
  truths:
    - "Modal component renders with close button (X), backdrop click, and ESC key to close"
    - "All form fields are rendered (isim, telefon, email, sirket, website, mesaj, gizlilik checkbox)"
    - "Required fields are visually indicated (isim, telefon, email, sirket, gizlilik)"
    - "Form fields use shadcn/ui Input, Textarea, and Label components with consistent styling"
    - "Modal has full-overlay loading spinner area (hidden by default)"
    - "Modal has success message area (hidden by default)"
  artifacts:
    - path: "src/components/forms/ContactModal.tsx"
      provides: "Modal wrapper with Radix UI Dialog, close handlers, and scroll lock"
      min_lines: 80
      exports: ["ContactModal"]
    - path: "src/components/forms/ContactForm.tsx"
      provides: "Form fields layout with shadcn/ui components"
      min_lines: 120
      exports: ["ContactForm"]
    - path: "src/components/ui/input.tsx"
      provides: "shadcn/ui Input component"
      min_lines: 30
    - path: "src/components/ui/textarea.tsx"
      provides: "shadcn/ui Textarea component"
      min_lines: 30
    - path: "src/components/ui/label.tsx"
      provides: "shadcn/ui Label component"
      min_lines: 30
  key_links:
    - from: "src/components/forms/ContactModal.tsx"
      to: "@radix-ui/react-dialog"
      via: "Dialog, DialogPortal, DialogOverlay, DialogContent, DialogTitle imports"
      pattern: "from ['\"]@radix-ui/react-dialog['\"]"
    - from: "src/components/forms/ContactForm.tsx"
      to: "src/components/ui/input.tsx"
      via: "Input component import"
      pattern: "from ['\"]@/components/ui/input['\"]"
---

<objective>
Create reusable contact modal and form components with shadcn/ui input fields

**Purpose:** Build the UI foundation for contact forms that will be used across all service pages. The modal-based approach ensures consistent UX and allows both Hero and page-end CTAs to trigger the same form.

**Output:**
- ContactModal component (Radix UI Dialog with close handlers and scroll lock)
- ContactForm component (form fields with shadcn/ui Input, Textarea, Label)
- shadcn/ui Input, Textarea, Label components (missing from current setup)
</objective>

<execution_context>
@C:\Users\Omer\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\Omer\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-form-entegrasyonu-&-n8n-webhook/03-CONTEXT.md
@src/components/ui/button.tsx
@src/components/services/ServicePageLayout.tsx
@src/app/globals.css

# Prior Phase Context (02)
@.planning/phases/02-page-structure-content/02-01-SUMMARY.md
@.planning/phases/02-page-structure-content/02-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Create shadcn/ui Input, Textarea, and Label components</name>
  <files>src/components/ui/input.tsx, src/components/ui/textarea.tsx, src/components/ui/label.tsx</files>
  <action>
    Create three shadcn/ui components following the established Button component pattern:

    1. **src/components/ui/input.tsx** (30-40 lines):
       - Forward ref to input element
       - Use cn() for className merging
       - Apply base classes: `flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50`
       - Export Input interface extending React.InputHTMLAttributes<HTMLInputElement>
       - Export default Input with displayName

    2. **src/components/ui/textarea.tsx** (30-40 lines):
       - Forward ref to textarea element
       - Same base classes as Input but without `h-10` (use `min-h-[80px]` instead)
       - Export Textarea interface extending React.TextareaHTMLAttributes<HTMLTextAreaElement>
       - Export default Textarea with displayName

    3. **src/components/ui/label.tsx** (30-40 lines):
       - Forward ref to label element
       - Use @radix-ui/react-label Label primitive
       - Base classes: `text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70`
       - Export Label interface extending LabelPrimitive.RootLabelProps
       - Export default Label with displayName

    Follow the exact pattern from button.tsx for consistency (forwardRef, displayName, cn utility).
  </action>
  <verify>
    - TypeScript compiles without errors: `npx tsc --noEmit`
    - Components are properly exported: check imports don't show red squigglies
  </verify>
  <done>
    Three shadcn/ui components (Input, Textarea, Label) are created and can be imported from @/components/ui/*
  </done>
</task>

<task type="auto">
  <name>Create ContactForm component with all form fields</name>
  <files>src/components/forms/ContactForm.tsx</files>
  <action>
    Create ContactForm component with all required fields:

    **Location:** `src/components/forms/ContactForm.tsx` (120-150 lines)

    **Props interface:**
    ```typescript
    interface ContactFormProps {
      serviceName?: string // For hidden field tracking
      onSubmit?: (data: FormData) => void | Promise<void>
      loading?: boolean
      success?: boolean
      error?: string
    }
    ```

    **Form fields (in this order, single column on mobile, two columns on desktop):**
    1. İsim (required) - Input type="text"
    2. Telefon (required) - Input type="tel"
    3. Email (required) - Input type="email"
    4. Şirket Adı (required) - Input type="text"
    5. Şirket Web Sitesi (optional) - Input type="url"
    6. Mesaj (optional) - Textarea with min-height

    **Hidden field:**
    - service: string (from serviceName prop, for lead tracking)

    **Checkbox at bottom:**
    - Gizlilik politikasını okudum, kabul ediyorum (required)
    - Text link: "Gizlilik politikası" opens /gizlilik (create placeholder href)

    **Layout:**
    - Single column on mobile (grid-cols-1)
    - Two columns on desktop (grid-cols-2) for: isim+telefon, email+sirket, website+mesaj
    - Full width: gizlilik checkbox, submit button
    - Gap: 4 (Tailwind space)

    **States to handle:**
    - loading: Show full-overlay spinner (absolute inset-0 with backdrop-blur and centered loader)
    - success: Show success message (green text, checkmark icon) after form submit
    - error: Show error message below relevant field or at top

    **Submit button:**
    - Use existing Button component (size="lg", full width)
    - Text: "Gönder" or "Gönderiliyor..." when loading
    - Disabled when loading is true

    **Styling:**
    - Use existing Input, Textarea, Label components
    - Error messages: red-500 text-sm below field
    - Spacing: 6 between field groups

    Note: This task creates the UI only. React Hook Form integration is in plan 03-02.
  </action>
  <verify>
    - Component renders without console errors
    - All 7 form fields are visible in the correct order
    - Mobile: single column, Desktop: two columns for paired fields
  </verify>
  <done>
    ContactForm component renders all form fields with proper layout and handles loading/success/error states
  </done>
</task>

<task type="auto">
  <name>Create ContactModal component with Radix UI Dialog</name>
  <files>src/components/forms/ContactModal.tsx</files>
  <action>
    Create ContactModal wrapper component using Radix UI Dialog:

    **Location:** `src/components/forms/ContactModal.tsx` (80-120 lines)

    **Props interface:**
    ```typescript
    interface ContactModalProps {
      open: boolean
      onOpenChange: (open: boolean) => void
      serviceName?: string
    }
    ```

    **Component structure:**
    1. **Dialog root:** Use @radix-ui/react-dialog Dialog, DialogTrigger (optional), DialogPortal, DialogOverlay, DialogContent, DialogTitle, DialogClose

    2. **DialogOverlay:** Full screen overlay with semi-transparent black bg (bg-black/50 backdrop-blur-sm)

    3. **DialogContent:**
       - Fixed position, centered
       - Max width: max-w-md or max-w-lg
       - Rounded: rounded-lg
       - Background: bg-card
       - Border: border
       - Shadow: shadow-lg
       - Padding: p-6
       - Animation: Use data-state to animate in/out (fade + scale)

    4. **Close button (X):**
       - Absolute position top-4 right-4
       - Use existing Button with variant="ghost", size="icon"
       - Triggers onOpenChange(false)

    5. **DialogTitle:**
       - Text: "İletişim Formu" or service-specific title
       - Class: text-lg font-semibold mb-2

    6. **Body content:**
       - Render ContactForm component inside
       - Pass serviceName prop to ContactForm
       - Handle form submission state (loading/success)

    7. **Close behaviors:**
       - Click outside (onInteractOutside): Close modal
       - ESC key (onEscapeKeyDown): Close modal
       - These are default Radix Dialog behaviors

    8. **Scroll lock:**
       - Radix Dialog automatically locks body scroll when open
       - Ensure this is not disabled

    **Optional:** Add DialogDescription for accessibility if needed

    **Integration:**
    - Import ContactForm from ./ContactForm
    - Manage internal state for loading, success, error (or accept as props)
    - On successful submit, wait 3 seconds then call onOpenChange(false) to auto-close
  </action>
  <verify>
    - Modal opens when open={true}
    - Modal closes on: X button click, backdrop click, ESC key press
    - Body scroll is locked when modal is open
    - ContactForm renders inside modal
  </verify>
  <done>
    ContactModal component wraps ContactForm in a Radix UI Dialog with proper close behaviors and scroll lock
  </done>
</task>

</tasks>

<verification>
After all tasks complete, verify:
1. All three shadcn/ui components (Input, Textarea, Label) are created and importable
2. ContactForm renders all 7 form fields in correct layout (responsive grid)
3. ContactModal opens/closes properly with all close methods (X, backdrop, ESC)
4. Body scroll is locked when modal is open
5. Components use existing design tokens (colors from globals.css)
6. No TypeScript errors
</verification>

<success_criteria>
1. Modal component renders with close button (X), backdrop click, and ESC key to close
2. All form fields are rendered (isim, telefon, email, sirket, website, mesaj, gizlilik checkbox)
3. Required fields are visually indicated
4. Form fields use shadcn/ui Input, Textarea, and Label components with consistent styling
5. Modal has full-overlay loading spinner area (hidden by default)
6. Modal has success message area (hidden by default)
</success_criteria>

<output>
After completion, create `.planning/phases/03-form-entegrasyonu-&-n8n-webhook/03-01-SUMMARY.md`
</output>
