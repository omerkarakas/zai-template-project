---
phase: 03-form-entegrasyonu-&-n8n-webhook
plan: 3
type: execute
wave: 3
depends_on: [03-01, 03-02]
files_modified:
  - src/app/hizmetler/google-isletme/page.tsx
  - src/app/hizmetler/seo/page.tsx
  - src/app/hizmetler/pmk/page.tsx
  - src/app/hizmetler/web-gelistirme/page.tsx
  - src/app/hizmetler/reklam/page.tsx
  - src/app/hizmetler/otomasyon/page.tsx
  - src/app/page.tsx
autonomous: true

must_haves:
  truths:
    - "Each service page has 'Hemen Başlayın' and 'Ücretsiz Danışmanlık' buttons that open contact modal"
    - "ContactModal is imported and rendered on all 6 service pages"
    - "Modal serviceName prop matches the service page name (for lead tracking)"
    - "Home page Hero has CTA button that opens contact modal"
    - "Clicking any CTA button opens the same contact modal with proper service context"
    - "Modal opens, submits form successfully, and closes after success"
    - "No 'Form yakında eklenecek' placeholder text remains on any service page"
  artifacts:
    - path: "src/app/hizmetler/google-isletme/page.tsx"
      contains: "ContactModal, useState, open, onOpenChange"
    - path: "src/app/hizmetler/seo/page.tsx"
      contains: "ContactModal, useState, open, onOpenChange"
    - path: "src/app/hizmetler/pmk/page.tsx"
      contains: "ContactModal, useState, open, onOpenChange"
    - path: "src/app/hizmetler/web-gelistirme/page.tsx"
      contains: "ContactModal, useState, open, onOpenChange"
    - path: "src/app/hizmetler/reklam/page.tsx"
      contains: "ContactModal, useState, open, onOpenChange"
    - path: "src/app/hizmetler/otomasyon/page.tsx"
      contains: "ContactModal, useState, open, onOpenChange"
    - path: "src/app/page.tsx"
      contains: "ContactModal, useState, open, onOpenChange"
  key_links:
    - from: "src/app/hizmetler/*/page.tsx"
      to: "src/components/forms/ContactModal"
      via: "Import statement"
      pattern: "from ['\"]@/components/forms/ContactModal['\"]"
    - from: "CTA button onClick"
      to: "setOpen(true)"
      via: "State setter function"
      pattern: "onClick.*=.*\\(\\).*=>.*setOpen\\(true\\)"
---

<objective>
Integrate contact modal into all service pages and home page with working CTAs

**Purpose:** Connect the modal and form components to all existing pages. Each service page gets a working contact form that tracks which service the user is interested in.

**Output:**
- All 6 service pages have working contact modals
- Home page Hero CTA opens contact modal
- Service name is passed to modal for lead tracking
- "Form yakında eklenecek" placeholders are removed
</objective>

<execution_context>
@C:\Users\Omer\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\Omer\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-form-entegrasyonu-&-n8n-webhook/03-CONTEXT.md
@src/app/hizmetler/google-isletme/page.tsx
@src/components/forms/ContactModal.tsx
@src/components/home/Hero.tsx

# Prior Phase Context
@.planning/phases/03-form-entegrasyonu-&-n8n-webhook/03-01-PLAN.md
@.planning/phases/03-form-entegrasyonu-&-n8n-webhook/03-02-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Add ContactModal to all 6 service pages</name>
  <files>
    src/app/hizmetler/google-isletme/page.tsx,
    src/app/hizmetler/seo/page.tsx,
    src/app/hizmetler/pmk/page.tsx,
    src/app/hizmetler/web-gelistirme/page.tsx,
    src/app/hizmetler/reklam/page.tsx,
    src/app/hizmetler/otomasyon/page.tsx
  </files>
  <action>
    Update all 6 service pages to include ContactModal with working CTAs:

    **For each service page, make these changes:**

    1. **Add useState import (if not already 'use client'):**
       ```typescript
       'use client'

       import { useState } from 'react'
       import ContactModal from '@/components/forms/ContactModal'
       ```

    2. **Add modal state:**
       ```typescript
       const [isModalOpen, setIsModalOpen] = useState(false)
       ```

    3. **Define service name for tracking:**
       ```typescript
       // At top of component, after imports/state
       const serviceName = 'Google İşletme Optimizasyonu' // Adjust per page
       ```

    4. **Update CTA buttons in the final section:**
       Find the section with "Başlamak İçin Doğru Zaman" and update buttons:
       ```typescript
       <Button
         size="lg"
         className="px-8"
         onClick={() => setIsModalOpen(true)}
       >
         Hemen Başlayın
       </Button>
       <Button
         size="lg"
         variant="outline"
         className="px-8"
         onClick={() => setIsModalOpen(true)}
       >
         Ücretsiz Danışmanlık
       </Button>
       ```

    5. **Remove placeholder text:**
       Remove this line if present:
       ```typescript
       <p className="mt-4 text-sm text-muted-foreground">
         Form yakında ekleneck
       </p>
       ```

    6. **Add ContactModal at the end (before ServicePageLayout closing tag):**
       ```typescript
       <ContactModal
         open={isModalOpen}
         onOpenChange={setIsModalOpen}
         serviceName={serviceName}
       />
       ```

    **Service names for each page:**
    - google-isletme: "Google İşletme Optimizasyonu"
    - seo: "Yerel SEO & Global SEO"
    - pmk: "Potansiyel Müşteri Kazanımı"
    - web-gelistirme: "Web Sitesi Geliştirme"
    - reklam: "Dijital Reklam Yönetimi"
    - otomasyon: "İş Akışı ve AI Otomasyonları"

    **Note:** Each page should become 'use client' if it wasn't already. This is required for useState.

    **Pattern to follow:**
    - Use the exact same pattern on all 6 pages for consistency
    - Modal should be rendered outside the main content flow (at the end of return)
    - onOpenChange callback handles both open and close actions
  </action>
  <verify>
    - Each service page has 'use client' directive
    - ContactModal is imported on all 6 pages
    - Two CTA buttons per page (Hemen Başlayın, Ücretsiz Danışmanlık)
    - Clicking either button opens the modal
    - Modal has correct serviceName prop for each page
    - No placeholder "Form yakında ekleneck" text remains
  </verify>
  <done>
    All 6 service pages have working contact modals with service-specific tracking
  </done>
</task>

<task type="auto">
  <name>Add ContactModal to home page Hero section</name>
  <files>src/app/page.tsx, src/components/home/Hero.tsx</files>
  <action>
    Update home page to include ContactModal with Hero CTA integration:

    **Approach:** Two options, choose the cleaner one:

    **Option A (Recommended):** Add modal to page.tsx, pass openState to Hero
    **Option B:** Add modal directly inside Hero component

    **Option A Implementation:**

    1. **Update src/app/page.tsx:**
       ```typescript
       'use client'

       import { useState } from 'react'
       import Hero from '@/components/home/Hero'
       import ServiceCards from '@/components/home/ServiceCards'
       import About from '@/components/home/About'
       import ContactModal from '@/components/forms/ContactModal'

       export default function HomePage() {
         const [isModalOpen, setIsModalOpen] = useState(false)

         return (
           <>
             <Hero onContactClick={() => setIsModalOpen(true)} />
             <ServiceCards />
             <About />
             <ContactModal
               open={isModalOpen}
               onOpenChange={setIsModalOpen}
               serviceName="Genel Danışmanlık" // Or omit for general inquiry
             />
           </>
         )
       }
       ```

    2. **Update src/components/home/Hero.tsx:**
       Add onContactClick prop to interface:
       ```typescript
       interface HeroProps {
         onContactClick?: () => void
       }

       export default function Hero({ onContactClick }: HeroProps) {
       ```

       Update the CTA button (first one) to use the callback:
       ```typescript
       <Button
         size="lg"
         className="group"
         onClick={onContactClick}
       >
         Hizmetlerimizi İnceleyin
         <ArrowRight className="ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform" />
       </Button>
       ```

       Note: The second button links to /hizmetler/pmk, leave it as is.

    **Alternative Consideration:**
    The Hero's "Hizmetlerimizi İnceleyin" button currently scrolls to #services. Consider changing its behavior:
    - Keep scroll behavior for existing UX
    - Add a third button "Bize Ulaşın" that opens modal
    - Or change first button to open modal (simpler)

    **Decision:** Keep it simple - replace the scroll behavior with modal open, or add modal-specific button.

    **Option B (if Hero should stay self-contained):**
    Add modal state and ContactModal directly inside Hero component. This is less flexible but keeps Hero independent.

    **Recommendation:** Use Option A for better separation of concerns.
  </action>
  <verify>
    - Home page has ContactModal component
    - Hero CTA button opens the contact modal
    - Modal opens and closes correctly
    - Page still renders without errors
  </verify>
  <done>
    Home page Hero CTA opens contact modal for general inquiries
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete contact form integration across all pages:
    - 6 service pages with working modals
    - Home page with modal from Hero
    - All CTAs trigger the same contact modal
    - Service name tracking for each page
  </what-built>
  <how-to-verify>
    1. Start dev server: `npm run dev`
    2. Visit each service page:
       - /hizmetler/google-isletme
       - /hizmetler/seo
       - /hizmetler/pmk
       - /hizmetler/web-gelistirme
       - /hizmetler/reklam
       - /hizmetler/otomasyon
    3. On each page:
       - Click "Hemen Başlayın" button → modal should open
       - Click "Ücretsiz Danışmanlık" button → modal should open
       - Close modal via X button → modal should close
       - Close modal via clicking outside → modal should close
       - Close modal via ESC key → modal should close
    4. Test form submission on one page:
       - Fill form with valid data
       - Submit → check browser network tab for POST to n8n webhook
       - Success message should appear
       - Modal should auto-close after 3 seconds
    5. Visit home page:
       - Click Hero CTA button → modal should open
    6. Check mobile responsiveness:
       - Test modal on mobile viewport
       - Form should be single column
       - Modal should fit within viewport
  </how-to-verify>
  <resume-signal>Type "approved" if all CTAs work and modal opens/closes correctly on all pages. Describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete, verify:
1. All 6 service pages have ContactModal with working CTAs
2. Home page has ContactModal accessible from Hero
3. Each modal passes correct serviceName for tracking
4. All "Form yakında ekleneck" placeholders removed
5. Modal open/close behaviors work (X, backdrop, ESC)
6. Form submits to n8n webhook (check network tab)
7. Success flow works (message + auto-close)
8. Mobile layout is responsive
</verification>

<success_criteria>
1. Each service page has 'Hemen Başlayın' and 'Ücretsiz Danışmanlık' buttons that open contact modal
2. ContactModal is imported and rendered on all 6 service pages
3. Modal serviceName prop matches the service page name
4. Home page Hero has CTA button that opens contact modal
5. Clicking any CTA button opens the same contact modal with proper service context
6. Modal opens, submits form successfully, and closes after success
7. No 'Form yakında ekleneck' placeholder text remains on any service page
</success_criteria>

<output>
After completion, create `.planning/phases/03-form-entegrasyonu-&-n8n-webhook/03-03-SUMMARY.md`
</output>
